{"version":3,"file":"uploadquestion.min.js","sources":["../src/modaldialog.js","../src/ajaxupload.js","../src/uploader.js"],"sourcesContent":["window.uploadModalObjects = window.uploadModalObjects || {};\n\n$(function() {\n    openUploadModalDialog();\n});\n\nfunction openUploadModalDialog(){\n    $('.upload').off('click.lsuploadquestion');\n    $('.upload').on('click.lsuploadquestion',function(e) {\n\n        e.preventDefault();\n\n        var $this = $(this);\n        var show_title   = getQueryVariable('show_title', this.href);\n        var show_comment = getQueryVariable('show_comment', this.href);\n        var pos          = getQueryVariable('pos', this.href);\n        var fieldname    = getQueryVariable('fieldname', this.href);\n        var buttonsOpts = {};\n        buttonsOpts[uploadLang.returnTxt] = function() {\n            $(this).dialog(\"close\");\n        };\n\n        $('#file-upload-modal-' + fieldname).modal('show');\n        $(document).off('shown.bs.modal.lsuploadquestion');\n        $(document).on('shown.bs.modal.lsuploadquestion','#file-upload-modal-' + fieldname, function()\n        {\n            var uploadFrame = $('#uploader'+fieldname);\n            uploadFrame.load(uploadFrame.data('src'));\n            updateMaxHeightModalbody($(this));\n        });\n        $('#file-upload-modal-' + fieldname).off('hide.bs.modal.lsuploadquestion');\n        $('#file-upload-modal-' + fieldname).on('hide.bs.modal.lsuploadquestion', function() {\n            var pass;\n            var uploaderId = 'uploader' + fieldname;\n            window.currentUplaodHandler.saveAndExit(fieldname,show_title, show_comment,pos);\n            // if(document.getElementById(uploaderId).contentDocument) {\n            //     if(document.getElementById(uploaderId).contentDocument.defaultView)\n            //         {       /*Firefox*/\n            //         pass=document.getElementById(uploaderId).contentDocument.defaultView.saveAndExit(fieldname,show_title,show_comment,pos);\n            //     }else{       /*IE8*/\n            //         pass=document.getElementById(uploaderId).contentWindow.saveAndExit(fieldname,show_title,show_comment,pos);\n            //     }\n            // }else{    /*IE6*/\n            //     pass=document.getElementById(uploaderId).contentWindow.saveAndExit(fieldname,show_title,show_comment,pos);\n            // }\n            $('#uploader'+fieldname).html('');\n            return pass;\n\n        });\n    });\n}\n\n/* Function to update upload frame\n *\n * @param frameName name of the frame (here it's id too :) )\n * @param integer heigth\n */\nfunction updateUploadFrame(frameName,heigth)\n{\n    $(\"#\"+frameName).innerHeight(heigth);\n}\n/* Function to update modal body max height\n *\n * @param modal jquery object : the modal\n */\nfunction updateMaxHeightModalbody(modal)\n{\n    var modalHeader=$(modal).find(\".modal-header\").outerHeight();\n    var modalFooter=$(modal).find(\".modal-footer\").outerHeight();\n    console.ls.log([$(window).height(),modalHeader,modalFooter,(modalHeader+modalFooter)]);\n    var finalMaxHeight=Math.max(150,$(window).height()-(modalHeader+modalFooter+16));// Not less than 150px\n    $(modal).find(\".modal-body\").css(\"max-height\",finalMaxHeight);\n}\n\nfunction getQueryVariable(variable, url) {\n    var vars = url.split(\"/\");\n    for (var i=0;i<vars.length;i++) {\n        //var pair = vars[i].split(\"=\");\n        if (vars[i] == variable) {\n        return vars[i+1];\n        }\n    }\n    // If not found try with ?\n    // TODO : replace by a regexp\n   var vars = url.replace(/\\&amp;/g,'&').split(\"&\");\n   for (var i=0;i<vars.length;i++) {\n           var pair = vars[i].split(\"=\");\n           if(pair[0] == variable){return pair[1];}\n   }\n   return null;\n}\n\nfunction isValueInArray(arr, val) {\n    inArray = false;\n    for (i = 0; i < arr.length; i++) {\n        if (val.toLowerCase() == arr[i].toLowerCase()) {\n            inArray = true;\n        }\n    }\n\n    return inArray;\n}\n\nwindow.displayUploadedFiles = function (filecount, fieldname, show_title, show_comment) {\n    var jsonstring = $(\"#\"+fieldname).val();\n    var i;\n    var display = '';\n\n    if (jsonstring == '[]' || jsonstring == '') {\n        $('#'+fieldname+'_uploadedfiles').html(display);\n        return;\n    }\n\n    if (jsonstring !== '')\n    {   \n        var jsonobj = [];\n        try{\n            jsonobj = JSON.parse(jsonstring);\n        } catch(e) {};\n\n        display = '<table width=\"100%\" class=\"question uploadedfiles\">';\n        display += '<thead>';\n        display += '<tr>';\n        display += '<th width=\"20%\">&nbsp;</th>';\n        \n        \n        if (show_title != 0)\n        display += '<th>'+uploadLang.titleFld+'</th>';\n        if (show_comment != 0)\n        display += '<th>'+uploadLang.commentFld+'</th>';\n        display += '<th>'+uploadLang.filenameFld+'</th><th class=\"edit\"></th></tr></thead><tbody>';\n        var image_extensions = new Array('gif', 'jpeg', 'jpg', 'png', 'swf', 'psd', 'bmp', 'tiff', 'jp2', 'iff', 'bmp', 'xbm', 'ico');\n                \n        jsonobj.forEach(function(item,iterator) {\n            if (isValueInArray(image_extensions, item.ext))\n            display += '<tr><td class=\"upload image\"><img src=\"' + uploadurl + '/filegetcontents/'+decodeURIComponent(item.filename)+'\" class=\"uploaded\" /></td>';\n            else\n            display += '<tr><td class=\"upload placeholder\"><div class=\"upload-placeholder\" /></td>';\n            \n            if (show_title != 0)\n            display += '<td class=\"upload title\">'+item.title+'</td>';\n            if (show_comment != 0)\n            display += '<td class=\"upload comment\">'+item.comment+'</td>';\n            display +='<td class=\"upload edit\">'+decodeURIComponent(item.name)+'</td><td>'+'<a class=\"btn btn-primary\" onclick=\"javascript:$(\\'#upload_'+fieldname+'\\').click();\"><span class=\"fa fa-pencil\"></span>&nbsp;'+uploadLang.editFile+'</a></td></tr>';\n        });\n        display += '</tbody></table>';\n       \n        $('#'+fieldname+'_uploadedfiles').html(display);\n    }\n};\n\nfunction showBasic() {\n    $('#basic').show();\n}\n\nfunction hideBasic() {\n    $('#basic').hide();\n}\n","/**\n * AJAX Upload ( http://valums.com/ajax-upload/ )\n * Copyright (c) Andrew Valums\n * Licensed under the MIT license\n */\n(function () {\n    /**\n     * Attaches event to a dom element.\n     * @param {Element} el\n     * @param type event name\n     * @param fn callback This refers to the passed element\n     */\n    function addEvent(el, type, fn){\n        if (el.addEventListener) {\n            el.addEventListener(type, fn, false);\n        } else if (el.attachEvent) {\n            el.attachEvent('on' + type, function(){\n                fn.call(el);\n            });\n        } else {\n            throw new Error('not supported or DOM not loaded');\n        }\n    }\n\n    /**\n     * Attaches resize event to a window, limiting\n     * number of event fired. Fires only when encounteres\n     * delay of 100 after series of events.\n     *\n     * Some browsers fire event multiple times when resizing\n     * http://www.quirksmode.org/dom/events/resize.html\n     *\n     * @param fn callback This refers to the passed element\n     */\n    function addResizeEvent(fn){\n        var timeout;\n\n        addEvent(window, 'resize', function(){\n            if (timeout){\n                clearTimeout(timeout);\n            }\n            timeout = setTimeout(fn, 100);\n        });\n    }\n\n    // Needs more testing, will be rewriten for next version\n    // getOffset function copied from jQuery lib (http://jquery.com/)\n    if (document.documentElement.getBoundingClientRect){\n        // Get Offset using getBoundingClientRect\n        // http://ejohn.org/blog/getboundingclientrect-is-awesome/\n        var getOffset = function(el){\n            var box = el.getBoundingClientRect();\n            var doc = el.ownerDocument;\n            var body = doc.body;\n            var docElem = doc.documentElement; // for ie\n            var clientTop = docElem.clientTop || body.clientTop || 0;\n            var clientLeft = docElem.clientLeft || body.clientLeft || 0;\n\n            // In Internet Explorer 7 getBoundingClientRect property is treated as physical,\n            // while others are logical. Make all logical, like in IE8.\n            var zoom = 1;\n            if (body.getBoundingClientRect) {\n                var bound = body.getBoundingClientRect();\n                zoom = (bound.right - bound.left) / body.clientWidth;\n            }\n\n            if (zoom > 1) {\n                clientTop = 0;\n                clientLeft = 0;\n            }\n\n            var top = box.top / zoom + (window.pageYOffset || docElem && docElem.scrollTop / zoom || body.scrollTop / zoom) - clientTop, left = box.left / zoom + (window.pageXOffset || docElem && docElem.scrollLeft / zoom || body.scrollLeft / zoom) - clientLeft;\n\n            return {\n                top: top,\n                left: left\n            };\n        };\n    } else {\n        // Get offset adding all offsets\n        var getOffset = function(el){\n            var top = 0, left = 0;\n            do {\n                top += el.offsetTop || 0;\n                left += el.offsetLeft || 0;\n                el = el.offsetParent;\n            } while (el);\n\n            return {\n                left: left,\n                top: top\n            };\n        };\n    }\n\n    /**\n     * Returns left, top, right and bottom properties describing the border-box,\n     * in pixels, with the top-left relative to the body\n     * @param {Element} el\n     * @return {Object} Contains left, top, right,bottom\n     */\n    function getBox(el){\n        var left, right, top, bottom;\n        var offset = getOffset(el);\n        left = offset.left;\n        top = offset.top;\n\n        right = left + el.offsetWidth;\n        bottom = top + el.offsetHeight;\n\n        return {\n            left: left,\n            right: right,\n            top: top,\n            bottom: bottom\n        };\n    }\n\n    /**\n     * Helper that takes object literal\n     * and add all properties to element.style\n     * @param {Element} el\n     * @param {Object} styles\n     */\n    function addStyles(el, styles){\n        for (var name in styles) {\n            if (styles.hasOwnProperty(name)) {\n                el.style[name] = styles[name];\n            }\n        }\n    }\n\n    /**\n     * Function places an absolutely positioned\n     * element on top of the specified element\n     * copying position and dimentions.\n     * @param {Element} from\n     * @param {Element} to\n     */\n    function copyLayout(from, to){\n        var box = getBox(from);\n\n        addStyles(to, {\n            position: 'absolute',\n            left : box.left + 'px',\n            top : box.top + 'px',\n            width : from.offsetWidth + 'px',\n            height : from.offsetHeight + 'px'\n        });\n    }\n\n    /**\n    * Creates and returns element from html chunk\n    * Uses innerHTML to create an element\n    */\n    var toElement = (function(){\n        var div = document.createElement('div');\n        return function(html){\n            div.innerHTML = html;\n            var el = div.firstChild;\n            return div.removeChild(el);\n        };\n    })();\n\n    /**\n     * Function generates unique id\n     * @return unique id\n     */\n    var getUID = (function(){\n        var id = 0;\n        return function(){\n            return 'ValumsAjaxUpload' + id++;\n        };\n    })();\n\n    /**\n     * Get file name from path\n     * @param {String} file path to file\n     * @return filename\n     */\n    function fileFromPath(file){\n        return file.replace(/.*(\\/|\\\\)/, \"\");\n    }\n\n    /**\n     * Get file extension lowercase\n     * @param {String} file name\n     * @return file extenstion\n     */\n    function getExt(file){\n        file = file.toLowerCase();\n        return (-1 !== file.indexOf('.')) ? file.replace(/.*[.]/, '') : '';\n    }\n\n    function hasClass(el, name){\n        var re = new RegExp('\\\\b' + name + '\\\\b');\n        return re.test(el.className);\n    }\n    function addClass(el, name){\n        if ( ! hasClass(el, name)){\n            el.className += ' ' + name;\n        }\n    }\n    function removeClass(el, name){\n        var re = new RegExp('\\\\b' + name + '\\\\b');\n        el.className = el.className.replace(re, '');\n    }\n\n    function removeNode(el){\n        el.parentNode.removeChild(el);\n    }\n\n    /**\n     * Easy styling and uploading\n     * @constructor\n     * @param button An element you want convert to\n     * upload button. Tested dimentions up to 500x500px\n     * @param {Object} options See defaults below.\n     */\n    window.AjaxUpload = function(button, options){\n        this._settings = {\n            // Location of the server-side upload script\n            action: 'upload.php',\n            // File upload name\n            name: 'userfile',\n            // Select & upload multiple files at once FF3.6+, Chrome 4+\n            multiple: false,\n            // Additional data to send\n            data: {},\n            // Submit file as soon as it's selected\n            autoSubmit: true,\n            // The type of data that you're expecting back from the server.\n            // html and xml are detected automatically.\n            // Only useful when you are using json data as a response.\n            // Set to \"json\" in that case.\n            responseType: false,\n            // Class applied to button when mouse is hovered\n            hoverClass: 'hover',\n            // Class applied to button when button is focused\n            focusClass: 'focus',\n            // Class applied to button when AU is disabled\n            disabledClass: 'disabled',\n            // When user selects a file, useful with autoSubmit disabled\n            // You can return false to cancel upload\n            onChange: function(file, extension){\n            },\n            // Callback to fire before file is uploaded\n            // You can return false to cancel upload\n            onSubmit: function(file, extension){\n            },\n            // Fired when file upload is completed\n            // WARNING! DO NOT USE \"FALSE\" STRING AS A RESPONSE!\n            onComplete: function(file, response){\n            }\n        };\n\n        // Merge the users options with our defaults\n        for (var i in options) {\n            if (options.hasOwnProperty(i)){\n                this._settings[i] = options[i];\n            }\n        }\n\n        // button isn't necessary a dom element\n        if (button.jquery){\n            // jQuery object was passed\n            button = button[0];\n        } else if (typeof button == \"string\") {\n            if (/^#.*/.test(button)){\n                // If jQuery user passes #elementId don't break it\n                button = button.slice(1);\n            }\n\n            button = document.getElementById(button);\n        }\n\n        if ( ! button || button.nodeType !== 1){\n            throw new Error(\"Please make sure that you're passing a valid element\");\n        }\n\n        if ( button.nodeName.toUpperCase() == 'A'){\n            // disable link\n            addEvent(button, 'click', function(e){\n                if (e && e.preventDefault){\n                    e.preventDefault();\n                } else if (window.event){\n                    window.event.returnValue = false;\n                }\n            });\n        }\n\n        // DOM element\n        this._button = button;\n        // DOM element\n        this._input = null;\n        // If disabled clicking on button won't do anything\n        this._disabled = false;\n\n        // if the button was disabled before refresh if will remain\n        // disabled in FireFox, let's fix it\n        this.enable();\n\n        this._rerouteClicks();\n    };\n\n    // assigning methods to our class\n    AjaxUpload.prototype = {\n        setData: function(data){\n            this._settings.data = data;\n        },\n        disable: function(){\n            addClass(this._button, this._settings.disabledClass);\n            this._disabled = true;\n\n            var nodeName = this._button.nodeName.toUpperCase();\n            if (nodeName == 'INPUT' || nodeName == 'BUTTON'){\n                this._button.setAttribute('disabled', 'disabled');\n            }\n\n            // hide input\n            if (this._input){\n                if (this._input.parentNode) {\n                    // We use visibility instead of display to fix problem with Safari 4\n                    // The problem is that the value of input doesn't change if it\n                    // has display none when user selects a file\n                    this._input.parentNode.style.visibility = 'hidden';\n                }\n            }\n        },\n        enable: function(){\n            removeClass(this._button, this._settings.disabledClass);\n            this._button.removeAttribute('disabled');\n            this._disabled = false;\n\n        },\n        /**\n         * Creates invisible file input\n         * that will hover above the button\n         * <div><input type='file' /></div>\n         */\n        _createInput: function(){\n            var self = this;\n\n            var input = document.createElement(\"input\");\n            input.setAttribute('type', 'file');\n            input.setAttribute('name', this._settings.name);\n            if(this._settings.multiple) input.setAttribute('multiple', 'multiple');\n\n            addStyles(input, {\n                'position' : 'absolute',\n                // in Opera only 'browse' button\n                // is clickable and it is located at\n                // the right side of the input\n                'right' : 0,\n                'margin' : 0,\n                'padding' : 0,\n                'fontSize' : '480px',\n                // in Firefox if font-family is set to\n                // 'inherit' the input doesn't work\n                'fontFamily' : 'sans-serif',\n                'cursor' : 'pointer'\n            });\n\n            var div = document.createElement(\"div\");\n            addStyles(div, {\n                'display' : 'block',\n                'position' : 'absolute',\n                'overflow' : 'hidden',\n                'margin' : 0,\n                'padding' : 0,\n                'opacity' : 0,\n                // Make sure browse button is in the right side\n                // in Internet Explorer\n                'direction' : 'ltr',\n                //Max zIndex supported by Opera 9.0-9.2\n                'zIndex': 2147483583\n            });\n\n            // Make sure that element opacity exists.\n            // Otherwise use IE filter\n            if ( div.style.opacity !== \"0\") {\n                if (typeof(div.filters) == 'undefined'){\n                    throw new Error('Opacity not supported by the browser');\n                }\n                div.style.filter = \"alpha(opacity=0)\";\n            }\n\n            addEvent(input, 'change', function(){\n\n                if ( ! input || input.value === ''){\n                    return;\n                }\n\n                // Get filename from input, required\n                // as some browsers have path instead of it\n                var file = fileFromPath(input.value);\n\n                if (false === self._settings.onChange.call(self, file, getExt(file))){\n                    self._clearInput();\n                    return;\n                }\n\n                // Submit form when value is changed\n                if (self._settings.autoSubmit) {\n                    self.submit();\n                }\n            });\n\n            addEvent(input, 'mouseover', function(){\n                addClass(self._button, self._settings.hoverClass);\n            });\n\n            addEvent(input, 'mouseout', function(){\n                removeClass(self._button, self._settings.hoverClass);\n                removeClass(self._button, self._settings.focusClass);\n\n                if (input.parentNode) {\n                    // We use visibility instead of display to fix problem with Safari 4\n                    // The problem is that the value of input doesn't change if it\n                    // has display none when user selects a file\n                    input.parentNode.style.visibility = 'hidden';\n                }\n            });\n\n            addEvent(input, 'focus', function(){\n                addClass(self._button, self._settings.focusClass);\n            });\n\n            addEvent(input, 'blur', function(){\n                removeClass(self._button, self._settings.focusClass);\n            });\n\n            div.appendChild(input);\n            document.body.appendChild(div);\n\n            this._input = input;\n        },\n        _clearInput : function(){\n            if (!this._input){\n                return;\n            }\n\n            // this._input.value = ''; Doesn't work in IE6\n            removeNode(this._input.parentNode);\n            this._input = null;\n            this._createInput();\n\n            removeClass(this._button, this._settings.hoverClass);\n            removeClass(this._button, this._settings.focusClass);\n        },\n        /**\n         * Function makes sure that when user clicks upload button,\n         * the this._input is clicked instead\n         */\n        _rerouteClicks: function(){\n            var self = this;\n\n            // IE will later display 'access denied' error\n            // if you use using self._input.click()\n            // other browsers just ignore click()\n\n            addEvent(self._button, 'mouseover', function(){\n                if (self._disabled){\n                    return;\n                }\n\n                if ( ! self._input){\n                    self._createInput();\n                }\n\n                var div = self._input.parentNode;\n                copyLayout(self._button, div);\n                div.style.visibility = 'visible';\n\n            });\n\n\n            // commented because we now hide input on mouseleave\n            /**\n             * When the window is resized the elements\n             * can be misaligned if button position depends\n             * on window size\n             */\n            //addResizeEvent(function(){\n            //    if (self._input){\n            //        copyLayout(self._button, self._input.parentNode);\n            //    }\n            //});\n\n        },\n        /**\n         * Creates iframe with unique name\n         * @return {Element} iframe\n         */\n        _createIframe: function(){\n            // We can't use getTime, because it sometimes return\n            // same value in safari :(\n            var id = getUID();\n\n            // We can't use following code as the name attribute\n            // won't be properly registered in IE6, and new window\n            // on form submit will open\n            // var iframe = document.createElement('iframe');\n            // iframe.setAttribute('name', id);\n\n            var iframe = toElement('<iframe src=\"javascript:false;\" name=\"' + id + '\" />');\n            // src=\"javascript:false; was added\n            // because it possibly removes ie6 prompt\n            // \"This page contains both secure and nonsecure items\"\n            // Anyway, it doesn't do any harm.\n            iframe.setAttribute('id', id);\n\n            iframe.style.display = 'none';\n            document.body.appendChild(iframe);\n\n            return iframe;\n        },\n        /**\n         * Creates form, that will be submitted to iframe\n         * @param {Element} iframe Where to submit\n         * @return {Element} form\n         */\n        _createForm: function(iframe){\n            var settings = this._settings;\n\n            // We can't use the following code in IE6\n            // var form = document.createElement('form');\n            // form.setAttribute('method', 'post');\n            // form.setAttribute('enctype', 'multipart/form-data');\n            // Because in this case file won't be attached to request\n            var form = toElement('<form method=\"post\" enctype=\"multipart/form-data\"></form>');\n\n            form.setAttribute('action', settings.action);\n            form.setAttribute('target', iframe.name);\n            form.style.display = 'none';\n            document.body.appendChild(form);\n\n            // Create hidden input element for each data key\n            for (var prop in settings.data) {\n                if (settings.data.hasOwnProperty(prop)){\n                    var el = document.createElement(\"input\");\n                    el.setAttribute('type', 'hidden');\n                    el.setAttribute('name', prop);\n                    el.setAttribute('value', settings.data[prop]);\n                    form.appendChild(el);\n                }\n            }\n            return form;\n        },\n        /**\n         * Gets response from iframe and fires onComplete event when ready\n         * @param iframe\n         * @param file Filename to use in onComplete callback\n         */\n        _getResponse : function(iframe, file){\n            // getting response\n            var toDeleteFlag = false, self = this, settings = this._settings;\n\n            addEvent(iframe, 'load', function(){\n\n                if (// For Safari\n                    iframe.src == \"javascript:'%3CHtml%3E%3C/html%3E';\" ||\n                    // For FF, IE\n                    iframe.src == \"javascript:'<html></html>';\"){\n                        // First time around, do not delete.\n                        // We reload to blank page, so that reloading main page\n                        // does not re-submit the post.\n\n                        if (toDeleteFlag) {\n                            // Fix busy state in FF3\n                            setTimeout(function(){\n                                removeNode(iframe);\n                            }, 0);\n                        }\n\n                        return;\n                }\n\n                var doc = iframe.contentDocument ? iframe.contentDocument : window.frames[iframe.id].document;\n\n                // fixing Opera 9.26,10.00\n                if (doc.readyState && doc.readyState != 'complete') {\n                   // Opera fires load event multiple times\n                   // Even when the DOM is not ready yet\n                   // this fix should not affect other browsers\n                   return;\n                }\n\n                // fixing Opera 9.64\n                if (doc.body && doc.body.innerHTML == \"false\") {\n                    // In Opera 9.64 event was fired second time\n                    // when body.innerHTML changed from false\n                    // to server response approx. after 1 sec\n                    return;\n                }\n\n                var response;\n\n                if (doc.XMLDocument) {\n                    // response is a xml document Internet Explorer property\n                    response = doc.XMLDocument;\n                } else if (doc.body){\n                    // response is html document or plain text\n                    response = doc.body.innerHTML;\n\n                    if (settings.responseType && settings.responseType.toLowerCase() == 'json') {\n                        // If the document was sent as 'application/javascript' or\n                        // 'text/javascript', then the browser wraps the text in a <pre>\n                        // tag and performs html encoding on the contents.  In this case,\n                        // we need to pull the original text content from the text node's\n                        // nodeValue property to retrieve the unmangled content.\n                        // Note that IE6 only understands text/html\n                        if (doc.body.firstChild && doc.body.firstChild.nodeName.toUpperCase() == 'PRE') {\n                            doc.normalize();\n                            response = doc.body.firstChild.firstChild.nodeValue;\n                        }\n\n                        if (response) {\n                            response = eval(\"(\" + response + \")\");\n                        } else {\n                            response = {};\n                        }\n                    }\n                } else {\n                    // response is a xml document\n                    response = doc;\n                }\n\n                settings.onComplete.call(self, file, response);\n\n                // Reload blank page, so that reloading main page\n                // does not re-submit the post. Also, remember to\n                // delete the frame\n                toDeleteFlag = true;\n\n                // Fix IE mixed content issue\n                iframe.src = \"javascript:'<html></html>';\";\n            });\n        },\n        /**\n         * Upload file contained in this._input\n         */\n        submit: function(){\n            var self = this, settings = this._settings;\n\n            if ( ! this._input || this._input.value === ''){\n                return;\n            }\n\n            var file = fileFromPath(this._input.value);\n\n            // user returned false to cancel upload\n            if (false === settings.onSubmit.call(this, file, getExt(file))){\n                this._clearInput();\n                return;\n            }\n\n            // sending request\n            var iframe = this._createIframe();\n            var form = this._createForm(iframe);\n\n            // assuming following structure\n            // div -> input type='file'\n            removeNode(this._input.parentNode);\n            removeClass(self._button, self._settings.hoverClass);\n            removeClass(self._button, self._settings.focusClass);\n\n            form.appendChild(this._input);\n\n            form.submit();\n\n            // request set, clean up\n            removeNode(form); form = null;\n            removeNode(this._input); this._input = null;\n\n            // Get response from iframe and fire onComplete event when ready\n            this._getResponse(iframe, file);\n\n            // get ready for next request\n            this._createInput();\n        }\n    };\n})();\n","import './ajaxupload.js';\nimport './modaldialog.js';\n\n\"use strict\"\nvar uploadHandler = function (qid, options) {\n\n    var init = function () {\n        doFileUpload();\n    };\n    \n    var fixParentHeigth = function () {\n        return;\n    }\n    var renderPreviewItem = function (fieldname, item, iterator) {\n\n        var i = iterator;\n        var image_extensions = new Array('gif', 'jpeg', 'jpg', 'png', 'swf', 'psd', 'bmp', 'tiff', 'jp2', 'iff', 'bmp', 'xbm', 'ico');\n         \n        var previewblock = $('<li id=\"' + fieldname + '_li_' + i + '\" class=\"previewblock file-element\"></li>');\n        var previewContainer = $('<div class=\"file-preview\"></div>');\n\n        if (isValueInArray(image_extensions, item.ext.toLowerCase())){\n            previewContainer.append('<img src=\"' + options.uploadurl + '/filegetcontents/' + item.filename + '\" class=\"uploaded\" />');\n        } else {\n            previewContainer.append('<div class=\"upload-placeholder\"></div>');\n        }\n\n        previewContainer.append('<span class=\"file-name\">' + escapeHtml(decodeURIComponent(item.name)) + '</span>');\n\n        if ($('#' + fieldname + '_show_title').val() == 1 || $('#' + fieldname + '_show_comment').val() == 1) {\n\n            var previewTitleContainer = $('');\n            var previewCommentContainer = $('');\n\n            if ($('#' + fieldname + '_show_title').val() == 1) {\n                var previewTitleContainer = $('<div class=\"form-group\"></div>');\n                $('<label class=\"control-label col-xs-4\"></label>')\n                    .attr('for', fieldname + '_title_' + i)\n                    .text(options.uploadLang.titleFld)\n                    .appendTo(previewTitleContainer);\n                $('<input class=\"form-control\" type=\"text\"/>')\n                    .attr('id', fieldname + \"_title_\" + i)\n                    .val(item.title)\n                    .wrap('<div class=\"input-container\"></div>')\n                    .appendTo(previewTitleContainer);\n            }\n\n            if ($('#' + fieldname + '_show_comment').val() == 1) {\n                var previewCommentContainer = $('<div class=\"form-group\"></div>');\n                $('<label class=\"control-label col-xs-4\"></label>')\n                    .attr('for', fieldname + '_comment_' + i)\n                    .text(options.uploadLang.commentFld)\n                    .appendTo(previewCommentContainer);\n                $('<input class=\"form-control\" type=\"text\"/>')\n                    .attr('id', fieldname + \"_comment_\" + i)\n                    .val(item.comment)\n                    .wrap('<div class=\"input-container\"></div>')\n                    .appendTo(previewCommentContainer);\n            }\n\n        }\n\n        var previewDeleteBlock = $('<div class=\"form-group\"></div>').append(\n            $('<a class=\"btn btn-danger\"></a>')\n                .html('<span class=\"fa fa-trash\"></span>&nbsp;' + options.uploadLang.deleteFile )\n                .on('click', function () {\n                    deletefile(fieldname, i);\n                })\n                .wrap('<div class=\"input-container text-center\"></div>')\n        );\n\n        $('<fieldset></fieldset>')\n            .append(previewTitleContainer).append(previewCommentContainer).append(previewDeleteBlock)\n            .wrap('<div class=\"file-info\"></div>')\n            .appendTo(previewContainer);\n\n            \n            $('<input type=\"hidden\" />').attr('id', fieldname + '_size_' + i).attr('value', item.size).appendTo(previewblock);\n            $('<input type=\"hidden\" />').attr('id', fieldname + '_name_' + i).attr('value', item.name).appendTo(previewblock);\n            $('<input type=\"hidden\" />').attr('id', fieldname + '_file_index_' + i).attr('value', i).appendTo(previewblock);\n            $('<input type=\"hidden\" />').attr('id', fieldname + '_filename_' + i).attr('value', item.filename).appendTo(previewblock);\n            $('<input type=\"hidden\" />').attr('id', fieldname + '_ext_' + i).attr('value', item.ext).appendTo(previewblock);\n            \n        // add file to the list only if it doesn't exists already\n        if ($(\"#\" + fieldname + \"_li_\" + i).length === 0){\n            previewblock.append(previewContainer);\n            $('#field' + fieldname + '_listfiles').append(previewblock);\n        }\n    }\n\n    var doFileUpload = function () {\n        var fieldname = options.sFieldName;\n        /* Load the previously uploaded files */\n        var filecount = $('#' + fieldname + '_filecount').val();\n\n        $('#' + fieldname + '_filecount').val(filecount);\n\n        var image_extensions = ['gif', 'jpeg', 'jpg', 'png', 'swf', 'psd', 'bmp', 'tiff', 'jp2', 'iff', 'bmp', 'xbm', 'ico'];\n\n        if (filecount > 0) {\n            var jsontext = $('#' + fieldname).val();\n\n            var json = '';\n            try{\n                json = JSON.parse(jsontext);\n            } catch(e) {}\n\n            if ($('#field' + fieldname + '_listfiles').length == 0) {\n                $('<ul id=\"field' + fieldname + '_listfiles\" class=\"files-list\" />').insertAfter('#uploadstatus_' + qid);\n            }\n\n            $('#' + fieldname + '_licount').val(filecount);\n\n            json.forEach(function (item, iterator) {\n                renderPreviewItem(fieldname, item, iterator+1);\n            });\n        }\n\n        // The upload button\n        var button = $('#button_' + qid);\n        new AjaxUpload(button, {\n            action: options.uploadurl + '/sid/' + surveyid + '/preview/' + options.questgrppreview + '/fieldname/' + fieldname + '/',\n            name: 'uploadfile',\n            data: {\n                valid_extensions: $('#' + fieldname + '_allowed_filetypes').val(),\n                max_filesize: $('#' + fieldname + '_maxfilesize').val(),\n                preview: $('#preview').val(),\n                surveyid: surveyid,\n                fieldname: fieldname,\n                YII_CSRF_TOKEN: options.csrfToken\n            },\n            onSubmit: function (file, ext) {\n\n                var maxfiles = parseInt($('#' + fieldname + '_maxfiles').val());\n                var filecount = parseInt($('#' + fieldname + '_filecount').val());\n                var allowed_filetypes = $('#' + fieldname + '_allowed_filetypes').val().split(\",\");\n                /* If maximum number of allowed filetypes have already been uploaded,\n                 * do not upload the file and display an error message ! */\n                if (filecount >= maxfiles) {\n                    $('#notice').html('<p class=\"alert alert-danger\"><span class=\"fa fa-exclamation-circle\"></span>&nbsp;' + uploadLang.errorNoMoreFiles + '</p>');\n                    fixParentHeigth();\n                    return false;\n                }\n\n                /* If the file being uploaded is not allowed,\n                 * do not upload the file and display an error message!\n                 */\n                var allowSubmit = allowed_filetypes.reduce(function (col, item) {\n                    return col || ext.toLowerCase() === item;\n                }, false);\n\n\n                if (allowSubmit == false) {\n                    $('#notice').html('<p class=\"alert alert-danger\"><span class=\"fa fa-exclamation-circle\"></span>&nbsp;' + uploadLang.errorOnlyAllowed.replace('%s', $('#' + fieldname + '_allowed_filetypes').val()) + '</p>');\n                    fixParentHeigth();\n                    return false;\n                }\n\n                // change button text, when user selects file\n                button.text(options.uploadLang.uploading);\n\n                // If you want to allow uploading only 1 file at time,\n                // you can disable upload button\n                this.disable();\n\n                button.append('<i id=\"loading-icon-fielupload\" class=\"fa fa-spinner fa-pulse fa-3x fa-fw\"></i>');\n\n            },\n            onComplete: function (file, response) {\n                button.text(uploadLang.selectfile);\n                $('#loading-icon-fielupload').remove();\n                // enable upload button\n                this.enable();\n\n                // Once the file has been uploaded via AJAX,\n                // the preview is appended to the list of files\n                try{\n                    var metadata = JSON.parse(response);\n                } catch(e) {\n                    /* Suppose we get an HTML error ? Replace whole HTML (without head) */\n                    $('body').html(response);\n                    return;\n                }\n\n                var count = parseInt($('#' + fieldname + '_licount').val());\n                count++;\n                $('#' + fieldname + '_licount').val(count);\n\n                if (metadata.success) {\n                    $('#notice').html('<p class=\"alert alert-success\"><span class=\"fa fa-success\"></span>&nbsp;' + metadata.msg + '</p>');\n                    if ($('#field' + fieldname + '_listfiles').length == 0) {\n                        $(\"<ul id='field\" + fieldname + \"_listfiles' class='files-list' />\").insertAfter(\"#uploadstatus_\" + options.qid);\n                    }\n                    renderPreviewItem(fieldname, metadata, count);\n\n                    // var previewblock =  \"<li id='\"+fieldname+\"_li_\"+count+\"' class='previewblock file-element'>\";\n\n                    // previewblock +=\"<div class='file-preview'>\";\n                    // if (isValueInArray(image_extensions, metadata.ext.toLowerCase()))\n                    //     previewblock += \"<img src='\"+uploadurl+\"/filegetcontents/\"+decodeURIComponent(metadata.filename)+\"' class='uploaded'  onload='fixParentHeigth()' />\";\n                    // else\n                    //     previewblock += \"<div class='upload-placeholder' />\";\n                    // previewblock += \"<span class='file-name'>\"+escapeHtml(decodeURIComponent(metadata.name))+\"<span>\";\n                    // previewblock += \"</div>\";\n\n                    // previewblock +=\"<div class='file-info'><fieldset>\";\n                    // if ($('#'+fieldname+'_show_title').val() == 1 || $('#'+fieldname+'_show_comment').val() == 1)\n                    // {\n                    //     if($('#'+fieldname+'_show_title').val() == 1)\n                    //     {\n                    //         previewblock += \"<div class='form-group'><label class='control-label col-xs-4' for='\"+fieldname+\"_title_\"+count+\"'>\"+uploadLang.titleFld+\"</label>\"+\"<div class='input-container'><input class='form-control' type='text' value='' id='\"+fieldname+\"_title_\"+count+\"' /></div></div>\";\n                    //     }\n                    //     if($('#'+fieldname+'_show_comment').val() == 1)\n                    //     {\n                    //         previewblock += \"<div class='form-group'><label class='control-label col-xs-4' for='\"+fieldname+\"_comment_\"+count+\"'>\"+uploadLang.commentFld+\"</label>\"+\"<div class='input-container'><input class='form-control' type='text' value='' id='\"+fieldname+\"_comment_\"+count+\"' /></div></div>\";\n                    //     }\n                    // }\n                    // previewblock += \"<div class='form-group'><div class='col-xs-4'></div><div class='input-container'><a class='btn btn-danger' onclick='deletefile(\\\"\"+fieldname+\"\\\", \"+count+\")'><span class='fa fa-trash'></span>&nbsp;\"+uploadLang.deleteFile+\"</a></div></div>\";\n                    // previewblock += \"</fieldset></div>\";\n\n                    // previewblock += \"<input type='hidden' id='\"+fieldname+\"_size_\"+count+\"' value=\"+metadata.size+\" />\"+\n                    //                 \"<input type='hidden' id='\"+fieldname+\"_file_index_\"+count+\"' value=\"+metadata.file_index+\" />\"+\n                    //                 \"<input type='hidden' id='\"+fieldname+\"_name_\"+count+\"' value=\"+metadata.name+\" />\"+\n                    //                 \"<input type='hidden' id='\"+fieldname+\"_filename_\"+count+\"' value=\"+metadata.filename+\" />\"+\n                    //                 \"<input type='hidden' id='\"+fieldname+\"_ext_\" +count+\"' value=\"+metadata.ext+\"  />\";\n\n                    // previewblock += \"</li>\";\n\n                    // // add file to the list\n                    // $('#field'+fieldname+'_listfiles').prepend(previewblock);\n\n                    var filecount = parseInt($('#' + fieldname + '_filecount').val());\n                    var minfiles = parseInt($('#' + fieldname + '_minfiles').val());\n                    filecount++;\n                    var maxfiles = parseInt($('#' + fieldname + '_maxfiles').val());\n                    $('#' + fieldname + '_filecount').val(filecount);\n\n                    if (filecount < minfiles)\n                        $('#uploadstatus').html(options.uploadLang.errorNeedMore.replace('%s', (minfiles - filecount)));\n                    else if (filecount < maxfiles)\n                        $('#uploadstatus').html(options.uploadLang.errorMoreAllowed.replace('%s', (maxfiles - filecount)));\n                    else\n                        $('#uploadstatus').html(options.uploadLang.errorMaxReached);\n                    fixParentHeigth();\n                    if (filecount >= maxfiles)\n                        $('#notice').html('<p class=\"alert alert-success\"><span class=\"fa fa-check\"></span>&nbsp;' + options.uploadLang.errorTooMuch + '</p>');\n                    fixParentHeigth();\n                } else {\n                    $('#notice').html('<p class=\"alert alert-danger\"><span class=\"fa fa-exclamation-circle\"></span>&nbsp;' + metadata.msg + '</p>');\n                    fixParentHeigth();\n                }\n\n            }\n        });\n    }\n\n    function isValueInArray(arr, val) {\n        return arr.reduce(function (col, item) {\n            return col || (val.toLowerCase() == item.toLowerCase())\n        }, false);\n    }\n\n    // pass the JSON data from the iframe to the main survey page\n    function passJSON(fieldname, show_title, show_comment, pos) {\n        var jsonArray = [];\n        var filecount = 0;\n        var licount = parseInt($('#' + fieldname + '_licount').val());\n        var i = 1;\n\n        while (i <= licount) {\n            if ($(\"#\" + fieldname + \"_li_\" + i).is(':visible')) {\n                var fileObject = {\n                    title: ($(\"#\" + fieldname + \"_show_title\").val() == 1) ? $(\"#\" + fieldname + \"_title_\" + i).val() : '',\n                    comment: ($(\"#\" + fieldname + \"_show_comment\").val() == 1) ? $(\"#\" + fieldname + \"_comment_\" + i).val() : '',\n                    size: $(\"#\" + fieldname + \"_size_\" + i).val(),\n                    name: $(\"#\" + fieldname + \"_name_\" + i).val(),\n                    filename: $(\"#\" + fieldname + \"_filename_\" + i).val(),\n                    ext: $(\"#\" + fieldname + \"_ext_\" + i).val()\n                };\n                filecount += 1;\n                jsonArray.push(fileObject);\n            }\n            i++;\n        }\n\n\n        $('#' + fieldname).val(JSON.stringify(jsonArray));\n        copyJSON(filecount, fieldname, show_title, show_comment, pos);\n    }\n\n    function copyJSON(filecount, fieldname, show_title, show_comment, pos) {\n        $('#'+fieldname+'_filecount').val(filecount);\n        displayUploadedFiles(filecount, fieldname, show_title, show_comment, pos);\n    }\n\n    var saveAndExit = function (fieldname, show_title, show_comment, pos) {\n        var filecount = parseInt($('#' + fieldname + '_filecount').val());\n        var minfiles = parseInt($('#' + fieldname + '_minfiles').val());\n\n        if (minfiles != 0 && filecount < minfiles && showpopups) {\n            var confirmans = confirm(uploadLang.errorNeedMoreConfirm.replace('%s', (minfiles - filecount)))\n            if (confirmans) {\n                passJSON(fieldname, show_title, show_comment, pos);\n                return true\n            } else\n                return false;\n        } else {\n            passJSON(fieldname, show_title, show_comment, pos);\n            return true;\n        }\n    }\n\n    var deletefile = function (fieldname, count) {\n\n        var file_index;\n        var filename = $(\"#\" + fieldname + \"_filename_\" + count).val();\n        var name = $(\"#\" + fieldname + \"_name_\" + count).val();\n\n        var filecount = parseInt($('#' + fieldname + '_filecount').val());\n        var licount = parseInt($('#' + fieldname + '_licount').val());\n\n        $.ajax({\n                method: \"POST\",\n                url: uploadurl,\n                data: {\n                    'delete': 1,\n                    'fieldname': fieldname,\n                    'filename': filename,\n                    'name': name,\n                    YII_CSRF_TOKEN: options.csrfToken\n                }\n            })\n            .done(function (msg) {\n                $('#notice').html('<p class=\"alert alert-success\"><span class=\"fa fa-check\"></span>&nbsp;' + msg + '</p>');\n                setTimeout(function () {\n                    $(\".success\").remove();\n                }, 5000);\n                $(\"#\" + fieldname + \"_li_\" + count).hide();\n                filecount--;\n                $('#' + fieldname + '_filecount').val(filecount);\n                file_index = $(\"#\" + fieldname + \"_file_index_\" + count).val();\n                for (j = count; j <= licount; j++) {\n                    if ($('#' + fieldname + '_li_' + j).is(\":visible\")) {\n                        $('#' + fieldname + '_file_index_' + j).val(file_index);\n                        file_index++;\n                    }\n                }\n                var minfiles = parseInt($('#' + fieldname + '_minfiles').val());\n                var maxfiles = parseInt($('#' + fieldname + '_maxfiles').val());\n\n                if (filecount < minfiles) {\n                    $('#uploadstatus').html(uploadLang.errorNeedMore.replace('%s', (minfiles - filecount)));\n                    fixParentHeigth();\n                } else {\n                    $('#uploadstatus').html(uploadLang.errorMoreAllowed.replace('%s', (maxfiles - filecount)));\n                    fixParentHeigth();\n                }\n            });\n    }\n\n    return {\n        init: init,\n        saveAndExit: saveAndExit,\n    };\n}\n\n\nfunction escapeHtml(unsafe) {\n    return unsafe\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\")\n        .replace(/\"/g, \"&quot;\")\n        .replace(/'/g, \"&#039;\");\n}\n\nwindow.getUploadHandler = function(qid, options){\n    if (!window.currentUplaodHandler){\n        window.currentUplaodHandler = new uploadHandler(qid, options);\n    }\n    window.currentUplaodHandler.init();\n    return window.currentUplaodHandler;\n}\n"],"names":["openUploadModalDialog","$","off","on","e","preventDefault","this","show_title","getQueryVariable","href","show_comment","pos","fieldname","uploadLang","returnTxt","dialog","modal","document","uploadFrame","load","data","updateMaxHeightModalbody","window","currentUplaodHandler","saveAndExit","html","modalHeader","find","outerHeight","modalFooter","console","ls","log","height","finalMaxHeight","Math","max","css","variable","url","vars","split","i","length","replace","pair","isValueInArray","arr","val","inArray","toLowerCase","addEvent","el","type","fn","addEventListener","attachEvent","Error","call","documentElement","getBoundingClientRect","getOffset","box","doc","ownerDocument","body","docElem","clientTop","clientLeft","zoom","bound","right","left","clientWidth","top","pageYOffset","scrollTop","pageXOffset","scrollLeft","offsetTop","offsetLeft","offsetParent","getBox","offset","offsetWidth","bottom","offsetHeight","addStyles","styles","name","hasOwnProperty","style","copyLayout","from","to","position","width","toElement","div","createElement","innerHTML","firstChild","removeChild","getUID","id","fileFromPath","file","getExt","indexOf","hasClass","RegExp","test","className","addClass","removeClass","re","removeNode","parentNode","AjaxUpload","button","options","_settings","action","multiple","autoSubmit","responseType","hoverClass","focusClass","disabledClass","onChange","extension","onSubmit","onComplete","response","jquery","slice","getElementById","nodeType","nodeName","toUpperCase","event","returnValue","_button","_input","_disabled","enable","_rerouteClicks","prototype","setData","disable","setAttribute","visibility","removeAttribute","_createInput","self","input","opacity","filters","filter","value","submit","_clearInput","appendChild","_createIframe","iframe","display","_createForm","settings","form","prop","_getResponse","toDeleteFlag","src","contentDocument","frames","readyState","XMLDocument","normalize","nodeValue","eval","setTimeout","uploadModalObjects","displayUploadedFiles","filecount","jsonstring","jsonobj","JSON","parse","titleFld","commentFld","filenameFld","image_extensions","Array","forEach","item","iterator","ext","uploadurl","decodeURIComponent","filename","title","comment","editFile","uploadHandler","qid","renderPreviewItem","previewblock","previewContainer","reduce","col","append","escapeHtml","previewTitleContainer","previewCommentContainer","attr","text","appendTo","wrap","previewDeleteBlock","deleteFile","deletefile","size","doFileUpload","sFieldName","jsontext","json","insertAfter","surveyid","questgrppreview","valid_extensions","max_filesize","preview","YII_CSRF_TOKEN","csrfToken","maxfiles","parseInt","allowed_filetypes","errorNoMoreFiles","errorOnlyAllowed","uploading","selectfile","remove","metadata","count","success","msg","minfiles","errorNeedMore","errorMoreAllowed","errorMaxReached","errorTooMuch","passJSON","jsonArray","licount","is","fileObject","push","stringify","copyJSON","file_index","ajax","method","done","hide","j","init","showpopups","confirm","errorNeedMoreConfirm","unsafe","getUploadHandler"],"mappings":"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"}